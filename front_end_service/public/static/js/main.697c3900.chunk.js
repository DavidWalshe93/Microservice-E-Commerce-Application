(this.webpackJsonpfront_end_react=this.webpackJsonpfront_end_react||[]).push([[0],{252:function(e,t,a){e.exports=a(444)},444:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a.n(c),s=a(19),l=a(30),i=a(15),u=a(450),m=a(451),d=a(226),p=a(8),f=a.n(p),E=a(14),b=a(13),h=a(459),O=a(448),v=a(455),w=a(449),g=a(102),y=(a(47),a(33)),j=function(e){return{type:"REMOVE",productID:e}},S={customer:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).USER_SERVICE_DEST||"http://localhost",catalog:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).CATALOG_SERVICE_DEST||"http://localhost",cart:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).CART_SERVICE_DEST||"http://localhost",order:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).ORDER_SERVICE_DEST||"http://localhost"},N={customer:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).USER_SERVICE_PORT||3001,catalog:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).CATALOG_SERVICE_PORT||3002,cart:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).CART_SERVICE_PORT||3003,order:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).ORDER_SERVICE_PORT||3004},k=function(e,t){return{method:e,mode:"cors",cache:"no-cache",credentials:"same-origin",headers:Object(b.a)({Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},t),redirect:"follow",referrerPolicy:"no-referrer"}},I=function(){var e=Object(E.a)(f.a.mark((function e(t){var a,n,r,c,o,s,l,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(b.a)({},t),n=a.service,r=a.endpoint,c=a.method,o=a.headers,s=a.body,console.log(t),n=n.toLowerCase(),c=c.toUpperCase(),l=k(c,o=o||{}),"POST"===c&&(s=s||{},s=JSON.stringify(s),l=Object(b.a)(Object(b.a)({},l),{},{body:s})),e.next=9,fetch("".concat(S[n],":").concat(N[n],"/").concat(r),l);case 9:return i=e.sent,e.next=12,i.json();case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(E.a)(f.a.mark((function e(t,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I({service:"cart",endpoint:"add",method:"POST",body:Object(b.a)(Object(b.a)({},a),{},{customerID:t})}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),x=Object(y.b)((function(e){return{customer:e.customer}}))((function(e){var t=Object(b.a)({},e),a=t.data,c=t.displayConfirmation,o=Object(n.useState)(1),s=Object(i.a)(o,2),l=s[0],u=s[1],m=function(e){var t=e.target,a=t.max,n=t.min,r=t.value;a=parseInt(a),n=parseInt(n);var c=!isNaN(r)&&r>=n&&r<=a?r:"";u(c)},d=function(){var t=Object(E.a)(f.a.mark((function t(n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=p(),c(a,l),u(1),e.customer.customerID){t.next=8;break}return t.next=6,y(r);case 6:t.next=10;break;case 8:return t.next=10,j(r);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){return Object(b.a)(Object(b.a)({},a),{},{quantity:parseInt(l)})},y=function(t){e.dispatch(function(e){return{type:"ADD",item:Object.assign({},e)}}(t))},j=function(){var t=Object(E.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T(e.customer.customerID,a);case 3:n=t.sent,y({productID:n.productID,name:n.name,price:n.price,quantity:a.quantity,image:n.image}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{className:"h-100 shadow-sm bg-white rounded"},r.a.createElement(h.a.Header,{className:"d-flex mb2-2 justify-content-around"},a.name),r.a.createElement(h.a.Img,{variant:"top",src:a.image}),console.log(a.image),r.a.createElement(h.a.Body,{className:"d-flex flex-column"}),r.a.createElement("div",{className:"d-flex mb-2 justify-content-around"},r.a.createElement(h.a.Title,{className:"mb-0 font-weight-bold"},a.quantity," In-Stock"),r.a.createElement("br",null),r.a.createElement(O.a,{pill:!0,className:"mb-2",variant:"warning"},"\u20ac",a.price)),r.a.createElement("div",{className:"d-flex mb-2 justify-content-around quantity-gauge"},r.a.createElement(g.a,null,r.a.createElement("div",{className:"d-flex mb-2 justify-content-around"},r.a.createElement("div",{className:"d-flex mb-2 justify-content-around input-quantity"},r.a.createElement(g.a.Prepend,null,r.a.createElement(g.a.Text,{id:"basic-addon1"},"#")),r.a.createElement(v.a.Control,{className:"input-quantity",type:"number",min:1,max:a.quantity,name:"qty".concat(a.productID),value:l,onChange:function(e){return m(e)}})),r.a.createElement("div",{className:" d-flex mb-2 justify-content-aroundinput-price"},r.a.createElement(g.a.Prepend,null,r.a.createElement(g.a.Text,{id:"basic-addon2"},"\u20ac")),r.a.createElement(v.a.Control,{className:"input-price",type:"text",disabled:!0,name:"price".concat(a.productID),value:(l*a.price).toFixed(2),onChange:m}))))),r.a.createElement(w.a,{onClick:function(){var e=Object(E.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),className:"mt-auto font-weight-bold",variant:"success",block:!0},"Buy")))})),D=a(457),C=function(e){var t=e.data,a=e.quantity,n=e.show,c=e.setShow;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{"aria-live":"polite","aria-atomic":"true",className:"toast-wrapper"},r.a.createElement(D.a,{show:n>0,onClose:function(){return c(!1)},delay:3e3,autohide:!0},r.a.createElement(D.a.Header,null,r.a.createElement("strong",{className:"mr-auto"},function(){var e="";return a>1&&(e="s"),"".concat(a," '").concat(t.name,"'").concat(e," added to your cart")}()),r.a.createElement("small",null,"Just now"),">"))))},_=function(){var e=Object(E.a)(f.a.mark((function e(t,a,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=11;break}return e.prev=1,e.next=4,I({service:"catalog",endpoint:"getProducts",method:"GET",body:null});case 4:r=e.sent,t(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),R=function(){var e=Object(n.useState)(0),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)({}),s=Object(i.a)(o,2),l=s[0],p=s[1],f=Object(n.useState)(0),E=Object(i.a)(f,2),b=E[0],h=E[1],O=Object(n.useState)([]),v=Object(i.a)(O,2),w=v[0],g=v[1],y=Object(n.useState)(void 0),j=Object(i.a)(y,2),S=j[0],N=j[1];Object(n.useEffect)((function(){_(g,S,N).then()}),[]);var k=function(e,t){h(t),c(!0),p(e)};return S?r.a.createElement("div",null,"Error: ",S.message):r.a.createElement(u.a,null,r.a.createElement(C,{data:l,quantity:b,show:a,setShow:c}),r.a.createElement(m.a,null,w.map((function(e){return r.a.createElement(d.a,{xs:4,className:"mb-5",key:e.productID},r.a.createElement(x,{data:e,displayConfirmation:k}))}))))},P=a(454),L=function(e){var t=Object(b.a)({},e),a=t.show,c=t.setShow,o=t.messageType,s=Object(n.useState)("MODAL"),u=Object(i.a)(s,2),m=u[0],d=u[1];Object(n.useEffect)((function(){d("MODAL")}),[]);var p=function(){switch(o){case"LOGIN":return{header:"You forgot to login first",body:"To ensure we can keep you up-to-date with your order as it processes we require\nyou to login/register. This will only take a few moments of your time but\nwill help eliminate any issues in keeping you up-to-date with your order."};default:return{header:"Internal error",body:"No information to show for messageType: "+o}}};return r.a.createElement(r.a.Fragment,null,function(){switch(m){case"LOGIN":return r.a.createElement(l.a,{to:{pathname:"/login",state:{returnPath:"/cart"}}});case"REGISTER":return r.a.createElement(l.a,{to:{pathname:"/register",state:{returnPath:"/cart"}}});default:return null}}(),r.a.createElement(P.a,{show:a,size:"lg",onHide:function(){return c(!1)},dialogClassName:"modal-90w","aria-labelledby":"login-warning-message"},r.a.createElement(P.a.Header,{closeButton:!0},r.a.createElement(P.a.Title,{id:"login-warning-message"},p().header)),r.a.createElement(P.a.Body,null,r.a.createElement("p",null,p().body),r.a.createElement(w.a,{className:"modal-button-primary",variant:"primary",onClick:function(e){return d("LOGIN")}},"Login"),r.a.createElement(w.a,{className:"modal-button-primary",variant:"primary",onClick:function(e){return d("REGISTER")}},"Register"),r.a.createElement(w.a,{className:"modal-button-secondary",variant:"secondary",onClick:function(){return c(!1)}},"Close"))))},q=a(452),A=function(){var e=Object(E.a)(f.a.mark((function e(t,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I({service:"cart",endpoint:"cart/".concat(t,"/items/").concat(a),method:"DELETE",body:null}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),G=Object(y.b)((function(e){return{customerID:e.customer.customerID}}))((function(e){var t=function(){var t=Object(E.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.customerID){t.next=5;break}return t.next=3,a(e.item.productID);case 3:t.next=7;break;case 5:return t.next=7,n(e.item.productID,e.customerID);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=function(){var t=Object(E.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.dispatch(j(a));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n=function(){var e=Object(E.a)(f.a.mark((function e(t,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(n,t);case 2:return r=e.sent,e.next=5,a(parseInt(r.productID));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("tr",null,r.a.createElement("td",{className:"table-item"},e.index+1),r.a.createElement("td",{width:"80px"},r.a.createElement(q.a,{width:"200px",height:"150px",src:e.item.image})),r.a.createElement("td",{className:"table-item"},e.item.name),r.a.createElement("td",{className:"table-item"},"\u20ac",e.item.price),r.a.createElement("td",{className:"table-item"},e.item.quantity),r.a.createElement("td",{className:"table-item"},"\u20ac",(e.item.price*e.item.quantity).toFixed(2)),r.a.createElement("td",{width:"30px",className:"table-item"},r.a.createElement(w.a,{onClick:function(){var e=Object(E.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),variant:"danger"},"Remove")))})),F=a(453),V=function(e){var t=e.items;return r.a.createElement(F.a,{striped:!0,bordered:!0,hover:!0,size:"sm",variant:"dark"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"table-header"},"#"),r.a.createElement("th",{className:"table-header"},"Product"),r.a.createElement("th",{className:"table-header"},"Product Name"),r.a.createElement("th",{className:"table-header"},"Unit Price"),r.a.createElement("th",{className:"table-header"},"Quantity"),r.a.createElement("th",{className:"table-header"},"Total"),r.a.createElement("th",null))),r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement(G,{key:t,item:e,index:t})}))))},B=a(101),U=function(){var e=Object(E.a)(f.a.mark((function e(t,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I({service:"order",endpoint:"newOrder",method:"POST",body:{customerID:t,saledate:(new Date).getTime(),orderDetails:Object(B.a)(a)}});case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),W=function(){var e=Object(E.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I({service:"cart",endpoint:"cart/".concat(t,"/items"),method:"DELETE",body:null});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),H=function(e){var t=e.show,a=e.setShow,n=e.message;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{"aria-live":"polite","aria-atomic":"true",className:"toast-wrapper"},r.a.createElement(D.a,{show:t>0,onClose:function(){return a(!1)},delay:3e3,autohide:!0},r.a.createElement(D.a.Header,null,r.a.createElement("strong",{className:"mr-auto"},n),r.a.createElement("small",null,"Just now"),">"))))},K=Object(y.b)((function(e){return{customer:e.customer,cart:e.cart}}))((function(e){var t=Object(b.a)({},e).customer,a=Object(n.useState)(!1),c=Object(i.a)(a,2),o=c[0],s=c[1],l=Object(n.useState)(void 0),m=Object(i.a)(l,2),p=m[0],f=m[1],E=Object(n.useState)(e.cart.items),h=Object(i.a)(E,2),O=h[0],v=h[1],g=Object(n.useState)(!1),y=Object(i.a)(g,2),j=y[0],S=y[1],N=Object(n.useState)(!1),k=Object(i.a)(N,2),I=k[0],T=k[1],x=Object(n.useState)("LOGIN"),D=Object(i.a)(x,2),C=D[0],_=D[1];Object(n.useEffect)((function(){v(e.cart.items)}),[e.cart.items]),Object(n.useEffect)((function(){O.length>0?S(!1):S(!0)}),[O]);Object(n.useEffect)((function(){p&&s(!0)}),[p]),Object(n.useEffect)((function(){o||f(void 0)}),[o]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{show:I,setShow:T,messageType:C}),o&&r.a.createElement(H,{show:o,setShow:s,message:p}),r.a.createElement(u.a,{fluid:!0},r.a.createElement(d.a,{xs:{span:10,offset:1}},r.a.createElement("div",{className:"d-flex justify-content-around"},r.a.createElement(w.a,{className:"cart-button ".concat("mx-5 p-2"),variant:"success",onClick:function(a){e.customer.token?U(t.customerID,O)&&(W(t.customerID),e.dispatch({type:"REMOVE_ALL"}),f("Your order has been placed")):(_("LOGIN"),T(!0))},disabled:j},r.a.createElement("p",{className:"button-text"},"Place Order")),r.a.createElement(w.a,{className:"cart-button ".concat("mx-5 p-2"),variant:"danger",onClick:function(){e.customer.token&&W(t.customerID),e.dispatch({type:"REMOVE_ALL"}),f("Your basket has been emptied")},disabled:j},r.a.createElement("p",{className:"button-text"},"Empty Cart"))),r.a.createElement(V,{items:O}))))})),M=function(e){var t=e.label,a=e.name,n=e.formik,c=e.type,o=void 0===c?"text":c,s=Object(b.a)({},n.getFieldProps(a)),l=s.onChange,i=s.onBlur,u=s.value,m=n.touched["".concat(a)],d=n.errors["".concat(a)];return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a.Label,null,t),r.a.createElement(v.a.Control,{type:o,name:a,value:u,onChange:l,onBlur:i,isInvalid:m&&d,isValid:m&&!d}),r.a.createElement(v.a.Control.Feedback,null),r.a.createElement(v.a.Control.Feedback,{type:"invalid"},d))},z=a(96),J=a(28),Y=function(e){return{type:"LOGIN",customer:e.customer,token:e.token}},Q=function(){return{type:"LOGOUT"}},X=function(e){return{type:"REGISTER",customer:e.customer,token:e.token}},Z=function(){var e=Object(E.a)(f.a.mark((function e(t,a,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I({service:"customer",endpoint:"login",method:"POST",body:{email:t,password:a}}).then((function(e){if("DOES_NOT_EXIST"!==e.error)return e;n(!0)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),$=function(e){console.log(e);var t=Object(b.a)({},e),a=t.dispatch,n=t.setShowToast;return Object(z.a)({initialValues:{email:"mytest@example.com",password:"myPass"},validationSchema:J.b({email:J.d().required("No email was provided").email("Invalid email address"),password:J.d().required("No password was provided")}),onSubmit:function(){var e=Object(E.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.prev=1,e.next=4,Z(t.email,t.password,n);case 4:r=e.sent,e.next=12;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(typeof n),n(!0),console.log(e.t0);case 12:a(Y(r));case 13:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()})},ee=function(){var e=Object(E.a)(f.a.mark((function e(t,a,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I({service:"cart",endpoint:"bulkAdd",method:"POST",body:{customerID:n,items:Object(b.a)({},a)}}).then((function(e){t(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),te=function(e){var t=e.show,a=e.setShow,n=e.message;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{"aria-live":"polite","aria-atomic":"true",className:"toast-wrapper"},r.a.createElement(D.a,{show:t>0,onClose:function(){return a(!1)},delay:3e3,autohide:!0},r.a.createElement(D.a.Header,null,r.a.createElement("strong",{className:"mr-auto"},n),r.a.createElement("small",null,"Just now"),">"))))},ae=Object(y.b)((function(e){return{customer:e.customer,cart:e.cart}}))((function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],o=a[1],s=e.location.state?e.location.state.returnPath:"/",u=$({dispatch:e.dispatch,setShowToast:o});Object(n.useEffect)((function(){if(e.customer.token){var t=e.cart.items.map((function(t){return Object(b.a)(Object(b.a)({},t),{},{customerID:e.customer.customerID})}));ee(m,t,e.customer.customerID)}}),[e.customer]);var m=function(t){e.dispatch({type:"SYNC",items:t})};return e.customer.token?r.a.createElement(l.a,{to:s}):r.a.createElement(r.a.Fragment,null,r.a.createElement(te,{show:c,setShow:o,message:"Incorrect account details"}),r.a.createElement(v.a,{noValidate:!0,onSubmit:u.handleSubmit},r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Group,{as:d.a,md:{span:6,offset:4}},r.a.createElement("h4",{className:"login-msg"},"Welcome back"))),r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Group,{as:d.a,md:{span:3,offset:4},controlId:"email"},r.a.createElement(M,{name:"email",label:"Email",formik:u,type:"email"}))),r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Group,{as:d.a,md:{span:3,offset:4},controlId:"password"},r.a.createElement(M,{name:"password",label:"Password",formik:u,type:"password"}))),r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Group,{as:d.a,md:{span:3,offset:4},controlId:"submitRow2"},r.a.createElement(w.a,{className:"login-button",type:"submit"},"Login")))))})),ne=function(){var e=Object(E.a)(f.a.mark((function e(t,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I({service:"customer",endpoint:"register",method:"POST",body:t}).then((function(e){if("EMAIL_IN_USE"!==e.error)return e;a(!0)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),re=function(e,t){return Object(z.a)({initialValues:{firstName:"Fake",lastName:"Account",email:"test2@example.com",phone:"0871234567",password:"12345678",verifyPassword:"12345678",address1:"Apartment A",address2:"False Rd.",city:"Cork City",state:"Cork",country:"Ireland",eircode:"A00B012",isAdmin:!1},validationSchema:J.b({firstName:J.d().max(15,"Must be 15 characters or less").required("First name required"),lastName:J.d().max(20,"Must be 20 characters or less").required("Last name required"),email:J.d().email("Invalid email address").required("No email was provided"),phone:J.d().matches("\\+?[0-9 ]+","Can only contain numbers").trim("Remove leading/trailing whitespace").required("No phone number was provided"),password:J.d().min(8,"Passwords must be over 8 characters long").required("No password was provided"),verifyPassword:J.d().oneOf([J.c("password")],"Passwords are not the same").required("No password was provided"),address1:J.d().required("Street name is required"),address2:J.d(),city:J.d().required("City name is required"),state:J.d().required("State is required"),country:J.d().required("Country is required"),eircode:J.d().required("Zip is required")}),onSubmit:function(){var a=Object(E.a)(f.a.mark((function a(n){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(n),a.prev=1,a.t0=e,a.t1=X,a.next=6,ne(n,t);case 6:return a.t2=a.sent,a.t3=(0,a.t1)(a.t2),a.next=10,(0,a.t0)(a.t3);case 10:a.next=15;break;case 12:a.prev=12,a.t4=a.catch(1),console.log(a.t4);case 15:case"end":return a.stop()}}),a,null,[[1,12]])})));return function(e){return a.apply(this,arguments)}}()})},ce=function(e){var t=e.label,a=e.name,n=e.formik,c=e.type,o=void 0===c?"checkbox":c,s=Object(b.a)({},n.getFieldProps(a)),l=s.onChange,i=s.onBlur,p=s.value,f=n.touched["".concat(a)],E=n.errors["".concat(a)];return r.a.createElement(u.a,null,r.a.createElement(m.a,null,r.a.createElement(d.a,{md:{span:10,offset:0}},r.a.createElement(v.a.Check,{type:o,label:t,name:a,value:p,onChange:l,onBlur:i,isInvalid:f&&E,isValid:f&&!E}))))},oe=Object(y.b)((function(e){return{customer:e.customer}}))((function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],o=a[1],s=e.location.state?e.location.state.returnPath:"/",u=re(e.dispatch,o);return e.customer.token?r.a.createElement(l.a,{to:s}):r.a.createElement(r.a.Fragment,null,r.a.createElement(te,{show:c,setShow:o,message:"That email is already in use."}),r.a.createElement(v.a,{noValidate:!0,onSubmit:u.handleSubmit},r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Group,{as:d.a,md:{span:5,offset:4}},r.a.createElement("h4",{className:"welcome-msg"},"Welcome to CIT Auto Buyers."))),r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Group,{as:d.a,md:{span:6,offset:4}},r.a.createElement("h5",{className:"welcome-msg__details"},"To create your new account we will just need a few details."))),r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Group,{as:d.a,md:{span:3,offset:3},controlId:"firstName"},r.a.createElement(M,{name:"firstName",label:"First Name",formik:u})),r.a.createElement(v.a.Group,{as:d.a,md:3,controlId:"lastName"},r.a.createElement(M,{name:"lastName",label:"Last Name",formik:u}))),r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Group,{as:d.a,md:{span:3,offset:3},controlId:"email"},r.a.createElement(M,{name:"email",label:"Email",formik:u,type:"email"})),r.a.createElement(v.a.Group,{as:d.a,md:3,controlId:"phone"},r.a.createElement(M,{name:"phone",label:"Phone Number",formik:u,type:"phone"}))),r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Group,{as:d.a,md:{span:3,offset:3},controlId:"password"},r.a.createElement(M,{name:"password",label:"Password",formik:u,type:"password"})),r.a.createElement(v.a.Group,{as:d.a,md:3,controlId:"verifyPassword"},r.a.createElement(M,{name:"verifyPassword",label:"Verify Password",formik:u,type:"password"}))),r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Group,{as:d.a,md:{span:3,offset:3},controlId:"address1"},r.a.createElement(M,{name:"address1",label:"Street Name",formik:u})),r.a.createElement(v.a.Group,{as:d.a,md:3,controlId:"address2"},r.a.createElement(M,{name:"address2",label:"Address Line 2",formik:u}))),r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Group,{as:d.a,md:{span:3,offset:3},controlId:"city"},r.a.createElement(M,{name:"city",label:"City",formik:u})),r.a.createElement(v.a.Group,{as:d.a,md:3,controlId:"state"},r.a.createElement(M,{name:"state",label:"County",formik:u}))),r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Group,{as:d.a,md:{span:3,offset:3},controlId:"country"},r.a.createElement(M,{name:"country",label:"Country",formik:u})),r.a.createElement(v.a.Group,{as:d.a,md:3,controlId:"eircode"},r.a.createElement(M,{name:"eircode",label:"Eircode",formik:u}))),r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Group,{as:d.a,md:{span:3,offset:3},controlId:"isAdmin"},r.a.createElement(ce,{name:"isAdmin",label:"Is this an admin account?",formik:u})),r.a.createElement(v.a.Group,{as:d.a,md:{span:6,offset:3},controlId:"submit"},r.a.createElement(w.a,{className:"create-account-button",type:"submit"},"Create account")))))})),se=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"404 - Page not found"))},le=a(458),ie=a(456),ue=Object(y.b)((function(e){return{cart:e.cart}}))((function(e){var t=Object(n.useState)(e.cart.items),a=Object(i.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)(0),l=Object(i.a)(s,2),u=l[0],p=l[1],f=Object(n.useState)(0),E=Object(i.a)(f,2),b=E[0],h=E[1];return Object(n.useEffect)((function(){o(e.cart.items)}),[e.cart]),Object(n.useEffect)((function(){var e=0,t=0;c.forEach((function(a){e+=a.quantity,t+=a.quantity*a.price})),p(e),h(t.toFixed(2))}),[c]),r.a.createElement(m.a,null,r.a.createElement(d.a,{xs:1},r.a.createElement("img",{src:"/images/shopping_cart.png",width:"40",height:"40",className:"d-inline-block align-top",alt:"React Bootstrap logo"})),r.a.createElement(d.a,{xs:4},r.a.createElement(O.a,{pill:!0,variant:"warning"},u)),r.a.createElement(d.a,{xs:2},r.a.createElement("h5",{className:"header-pricing"},"\u20ac",b)))})),me=function(){return r.a.createElement(ie.a,null,r.a.createElement(le.a.Brand,{as:s.b,to:"/cart"},r.a.createElement(ue,null)),r.a.createElement(ie.a.Link,{as:s.c,to:"/login",activeClassName:"active"},"Login"),r.a.createElement(ie.a.Link,{as:s.c,to:"/register",activeClassName:"active"},"Register"))},de=function(){return r.a.createElement(ie.a,null,r.a.createElement(le.a.Brand,{as:s.b,to:"/cart"},r.a.createElement(ue,null)),r.a.createElement(ie.a.Link,{as:s.c,to:"/orders",activeClassName:"active"},"My Orders"),r.a.createElement(ie.a.Link,{as:s.c,to:"/logout",activeClassName:"active"},"Logout"))},pe=function(){return r.a.createElement(ie.a,null,r.a.createElement(ie.a.Link,{as:s.c,to:"/newProduct",activeClassName:"active"},"Register Product"),r.a.createElement(ie.a.Link,{as:s.c,to:"/logout",activeClassName:"active"},"Logout"))},fe=Object(y.b)((function(e){return{firstName:e.customer.firstName,lastName:e.customer.lastName,token:e.customer.token,isAdmin:e.customer.isAdmin}}))((function(e){var t=Object(n.useState)(r.a.createElement(me,null)),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)("".concat(e.firstName," ").concat(e.lastName)),u=Object(i.a)(l,2),m=u[0],d=u[1];return Object(n.useEffect)((function(){e.token?o(!0===e.isAdmin?r.a.createElement(pe,null):r.a.createElement(de,null)):o(r.a.createElement(me,null))}),[e.token,e.isAdmin]),Object(n.useEffect)((function(){e.firstName?d("".concat(e.firstName," ").concat(e.lastName)):d(null)}),[e.firstName,e.lastName]),r.a.createElement(r.a.Fragment,null,r.a.createElement(le.a,{fixed:"top",expand:"lg",bg:"dark",variant:"dark"},r.a.createElement(le.a.Brand,{as:s.c,to:"/products"},"CIT Auto Buyers"),r.a.createElement(le.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(le.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(ie.a,{className:"mr-auto"},r.a.createElement(ie.a.Link,{as:s.c,to:"/products",activeClassName:"active"},"Products")),r.a.createElement(ie.a,{className:"mr-auto"},m?r.a.createElement(ie.a.Link,{as:s.c,to:"/orders",activeClassName:"active"},"Logged in as ",m):null),c)))})),Ee=function(){return r.a.createElement("div",{className:"header"},r.a.createElement(fe,{className:"navbar"}))},be=function(){var e=Object(E.a)(f.a.mark((function e(t){var a,n,r,c,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(b.a)({},t),n=a.name,r=a.price,c=a.quantity,o=a.image,e.next=3,I({service:"catalog",endpoint:"newProduct",method:"POST",body:{name:n,price:r,quantity:c,image:o}});case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(){return Object(z.a)({initialValues:{name:"",price:"",quantity:"",image:"/images/"},validationSchema:J.b({name:J.d().required("No product name was provided"),price:J.a().required("No price was provided").min(.01),quantity:J.a().required("No quantity was provided").min(1,"Value must be 1 or greater to be valid").integer("Input must be a whole number"),image:J.d().required("Image path is required").min("/images/".length).matches(/.*\.(png|jpeg|jpg)$/,{message:"Selected image must have a .png/.jpeg/.jpg file extension"})}),onSubmit:function(e){be(e)}})},Oe=function(){var e=he();return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{noValidate:!0,onSubmit:e.handleSubmit},r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Group,{as:d.a,md:{span:5,offset:4}},r.a.createElement("h4",null,"Add a new product to the store inventory."))),r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Group,{as:d.a,md:{span:6,offset:3},controlId:"name"},r.a.createElement(M,{name:"name",label:"Product Name",formik:e}))),r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Group,{as:d.a,md:{span:3,offset:3},controlId:"price"},r.a.createElement(M,{name:"price",label:"Unit Price",formik:e})),r.a.createElement(v.a.Group,{as:d.a,md:{span:3,offset:0},controlId:"quantity"},r.a.createElement(M,{name:"quantity",label:"Quantity In-Stock",formik:e}))),r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Group,{as:d.a,md:{span:6,offset:3},controlId:"image"},r.a.createElement(M,{name:"image",label:"Product Image",formik:e}))),r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Group,{as:d.a,md:{span:3,offset:8},controlId:"submitRow3"},r.a.createElement(w.a,{type:"submit"},"Add Product")))))},ve=a(234),we=a(235),ge=a(250),ye=a(249),je=function(){var e=Object(E.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I({service:"customer",endpoint:"logout",method:"POST",headers:{Authorization:"Bearer ".concat(t)}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(e){Object(ge.a)(a,e);var t=Object(ye.a)(a);function a(){var e;Object(ve.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={token:e.props.token,dispatch:e.props.dispatch,content:r.a.createElement(r.a.Fragment,null)},e}return Object(we.a)(a,[{key:"componentDidMount",value:function(){var e=Object(E.a)(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.token){e.next=15;break}return e.prev=1,this.state.dispatch({type:"REMOVE_ALL"}),e.t0=this.state,e.t1=Q,e.next=7,je(this.state.token).then((function(){t.state.content=r.a.createElement(l.a,{to:"/login"})}));case 7:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.t0.dispatch.call(e.t0,e.t3),e.next=15;break;case 12:e.prev=12,e.t4=e.catch(1),console.log("error",e.t4);case 15:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.content}}]),a}(r.a.Component),Ne=Object(y.b)((function(e){return{token:e.customer.token,cart:e.cart}}))(Se),ke=function(){var e=Object(E.a)(f.a.mark((function e(t,a,n,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=12;break}return console.log(a),e.prev=2,e.next=5,I({service:"order",endpoint:"getOrders/".concat(a),method:"GET",body:null}).then((function(e){console.log("orders",e),t(e)}));case 5:e.sent,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0),r(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),Ie=a(180),Te=Object(y.b)((function(e){return{customerID:e.customer.customerID}}))((function(e){var t=Object(b.a)({},e),a=t.setShow,c=t.customerID,o=t.setModalData,s=Object(n.useState)({}),l=Object(i.a)(s,2),u=l[0],m=l[1],d=Object(n.useState)({}),p=Object(i.a)(d,2),f=p[0],E=p[1],h=Object(n.useState)(void 0),O=Object(i.a)(h,2),v=O[0],w=O[1];Object(n.useEffect)((function(){ke(m,c,v,w)}),[]);var g=[{label:"Order No.",field:"orderNo",sort:"asc",width:100},{label:"Sale Date",field:"saleDate",sort:"asc",width:220},{label:"Order Size",field:"orderSize",sort:"asc",width:220},{label:"Order Total",field:"orderTotal",sort:"asc"},{label:"",field:"button",sort:"asc",width:135,align:"center"}],y=function(e){var t=new Date(0);t.setTime(e);var a="".concat(t.getDate()).padStart(2,0),n="".concat(t.getMonth()+1).padStart(2,0),r=t.getFullYear();return"".concat(r,"/").concat(n,"/").concat(a)};Object(n.useEffect)((function(){if(console.log("ORDERS",u),Object.keys(u).length>0){var e=u.map((function(e){return function(e){var t=0,n=0;return e.orderDetails.forEach((function(e){n+=e.quantity,t+=e.quantity*e.price})),t=t.toFixed(2),e.saledate=y(e.saledate),{orderNo:"".concat(e.orderID),saleDate:e.saledate,orderSize:"".concat(n),orderTotal:"".concat(t),button:r.a.createElement(Ie.c,{color:"light-blue",size:"sm",onClick:function(r){e=Object(b.a)(Object(b.a)({},e),{},{orderSize:n,orderTotal:t}),o(e),a(!0)}},"Order Info")}}(e)}));E({columns:g,rows:e})}}),[u]);try{return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ie.d,{striped:!0,bordered:!0,small:!0,order:["saleDate","desc"],data:f}))}catch(j){console.log(j)}})),xe=function(e){var t=e.modalData.orderDetails;return r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement("tr",{key:e},r.a.createElement("td",null,e.productID),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.quantity),r.a.createElement("td",null,"\u20ac",e.price),r.a.createElement("td",null,"\u20ac",(e.price*e.quantity).toFixed(2)))})))},De=function(e){var t=Object(b.a)({},e),a=t.show,n=t.setShow,c=t.modalData;console.log("MODAL",c);return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{show:a,size:"lg",onHide:function(){return n(!1)},dialogClassName:"modal-90w","aria-labelledby":"login-warning-message"},r.a.createElement(P.a.Header,{closeButton:!0},r.a.createElement(P.a.Title,{id:"login-warning-message"},"Order No. ",c.orderID)),r.a.createElement(P.a.Body,null,r.a.createElement("h4",null,"Sale date: ",c.saledate),r.a.createElement(F.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ProductID"),r.a.createElement("th",null,"Product Name"),r.a.createElement("th",null,"Quantity"),r.a.createElement("th",null,"Unit Price"),r.a.createElement("th",null,"Total Price"))),r.a.createElement("tbody",null,r.a.createElement(xe,{modalData:c}))),r.a.createElement("h4",null,"Total: \u20ac",c.orderTotal),r.a.createElement(w.a,{className:"modal-button-secondary",variant:"primary",onClick:function(){return n(!1)}},"Close"))))},Ce=(a(439),a(440),function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)({}),s=Object(i.a)(o,2),l=s[0],m=s[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(De,{show:a,setShow:c,modalData:l}),r.a.createElement(u.a,{fluid:!0},r.a.createElement(d.a,{xs:{span:6,offset:3}},r.a.createElement("h1",null,"Orders"),r.a.createElement(Te,{setShow:c,setModalData:m}))))}),_e=function(){return r.a.createElement(s.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee,null),r.a.createElement(l.d,null,r.a.createElement(l.b,{path:["/","/products"],component:R,exact:!0}),r.a.createElement(l.b,{path:"/cart",component:K}),r.a.createElement(l.b,{path:"/login",component:ae}),r.a.createElement(l.b,{path:"/register",component:oe}),r.a.createElement(l.b,{path:"/newProduct",component:Oe}),r.a.createElement(l.b,{path:"/orders",component:Ce}),r.a.createElement(l.b,{path:"/logout",component:Ne}),r.a.createElement(l.b,{component:se}))))},Re=(a(441),a(248)),Pe=a(53),Le=a(148),qe=a(179),Ae=a.n(qe),Ge={customerID:null,token:void 0},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(b.a)(Object(b.a)(Object(b.a)({},e),t.customer),{},{token:t.token});case"LOGOUT":return Object(b.a)({},Ge);case"REGISTER":return Object(b.a)(Object(b.a)(Object(b.a)({},e),t.customer),{},{token:t.token});default:return e}},Ve={items:[]},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD":var a=e.items.some((function(e){return e.productID===t.item.productID}));return a?{items:Object(B.a)(e.items.map((function(e){return e.productID===t.item.productID?(e.quantity+=t.item.quantity,e):e})))}:{items:[].concat(Object(B.a)(e.items),[t.item])};case"SYNC":return{items:t.items};case"REMOVE":return{items:Object(B.a)(e.items.filter((function(e){if(e.productID!==t.productID)return e})))};case"REMOVE_ALL":return{items:[]};default:return e}},Ue={key:"customer",storage:Ae.a},We={key:"cart",storage:Ae.a},He=Object(Le.a)(Ue,Fe),Ke=Object(Le.a)(We,Be),Me=function(){var e=Object(Pe.c)(Object(Pe.b)({customer:He,cart:Ke}));return{store:e,persistor:Object(Le.b)(e)}}(),ze=Me.store,Je=Me.persistor;console.log(ze.getState());var Ye=r.a.createElement(y.a,{store:ze},r.a.createElement(Re.a,{loading:null,persistor:Je},r.a.createElement(_e,null)));o.a.render(Ye,document.getElementById("root"))},47:function(e,t,a){}},[[252,1,2]]]);
//# sourceMappingURL=main.697c3900.chunk.js.map