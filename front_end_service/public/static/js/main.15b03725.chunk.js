(this.webpackJsonpfront_end_react=this.webpackJsonpfront_end_react||[]).push([[0],{141:function(e,t,a){e.exports=a(173)},173:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),o=a.n(c),s=a(10),l=a(54),u=a(8),i=a(179),m=a(180),d=a(124),p=a(6),f=a.n(p),E=a(7),b=a(9),h=a(188),v=a(177),w=a(184),g=a(178),y=a(75),O=(a(33),a(19)),j=function(e){return{type:"REMOVE",productID:e}},k={customer:3001,catalog:3002,cart:3003,order:3004},N=function(e,t){return{method:e,mode:"cors",cache:"no-cache",credentials:"same-origin",headers:Object(b.a)({Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},t),redirect:"follow",referrerPolicy:"no-referrer"}},x=function(){var e=Object(E.a)(f.a.mark((function e(t){var a,n,r,c,o,s,l,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(b.a)({},t),n=a.service,r=a.endpoint,c=a.method,o=a.headers,s=a.body,console.log(t),n=n.toLowerCase(),c=c.toUpperCase(),l=N(c,o=o||{}),"POST"===c&&(s=s||{},s=JSON.stringify(s),l=Object(b.a)({},l,{body:s})),e.next=9,fetch("http://localhost:".concat(k[n],"/").concat(r),l);case 9:return u=e.sent,e.next=12,u.json();case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(E.a)(f.a.mark((function e(t,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x({service:"cart",endpoint:"add",method:"POST",body:Object(b.a)({},a,{customerID:t})}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),S=Object(O.b)((function(e){return{customer:e.customer}}))((function(e){var t=Object(b.a)({},e),a=t.data,c=t.displayConfirmation,o=Object(n.useState)(1),s=Object(u.a)(o,2),l=s[0],i=s[1],m=function(e){var t=e.target,a=t.max,n=t.min,r=t.value;a=parseInt(a),n=parseInt(n);var c=!isNaN(r)&&r>=n&&r<=a?r:"";i(c)},d=function(){var t=Object(E.a)(f.a.mark((function t(n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=p(),c(a,l),i(1),e.customer.customerID){t.next=8;break}return t.next=6,O(r);case 6:t.next=10;break;case 8:return t.next=10,j(r);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){return Object(b.a)({},a,{quantity:parseInt(l)})},O=function(t){e.dispatch(function(e){return{type:"ADD",item:Object.assign({},e)}}(t))},j=function(){var t=Object(E.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I(e.customer.customerID,a);case 3:n=t.sent,O({productID:n.productID,name:n.name,price:n.price,quantity:a.quantity,image:n.image}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{className:"h-100 shadow-sm bg-white rounded"},r.a.createElement(h.a.Header,{className:"d-flex mb2-2 justify-content-around"},a.name),r.a.createElement(h.a.Img,{variant:"top",src:a.image}),console.log(a.image),r.a.createElement(h.a.Body,{className:"d-flex flex-column"}),r.a.createElement("div",{className:"d-flex mb-2 justify-content-around"},r.a.createElement(h.a.Title,{className:"mb-0 font-weight-bold"},a.quantity," In-Stock"),r.a.createElement("br",null),r.a.createElement(v.a,{pill:!0,className:"mb-2",variant:"warning"},"\u20ac",a.price)),r.a.createElement("div",{className:"d-flex mb-2 justify-content-around quantity-gauge"},r.a.createElement(y.a,null,r.a.createElement("div",{className:"d-flex mb-2 justify-content-around"},r.a.createElement("div",{className:"d-flex mb-2 justify-content-around input-quantity"},r.a.createElement(y.a.Prepend,null,r.a.createElement(y.a.Text,{id:"basic-addon1"},"#")),r.a.createElement(w.a.Control,{className:"input-quantity",type:"number",min:1,max:a.quantity,name:"qty".concat(a.productID),value:l,onChange:function(e){return m(e)}})),r.a.createElement("div",{className:" d-flex mb-2 justify-content-aroundinput-price"},r.a.createElement(y.a.Prepend,null,r.a.createElement(y.a.Text,{id:"basic-addon2"},"\u20ac")),r.a.createElement(w.a.Control,{className:"input-price",type:"text",disabled:!0,name:"price".concat(a.productID),value:(l*a.price).toFixed(2),onChange:m}))))),r.a.createElement(g.a,{onClick:function(){var e=Object(E.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),className:"mt-auto font-weight-bold",variant:"success",block:!0},"Buy")))})),D=a(185),C=function(e){var t=e.data,a=e.quantity,n=e.show,c=e.setShow;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{"aria-live":"polite","aria-atomic":"true",className:"toast-wrapper"},r.a.createElement(D.a,{show:n>0,onClose:function(){return c(!1)},delay:3e3,autohide:!0},r.a.createElement(D.a.Header,null,r.a.createElement("strong",{className:"mr-auto"},function(){var e="";return a>1&&(e="s"),"".concat(a," '").concat(t.name,"'").concat(e," added to your cart")}()),r.a.createElement("small",null,"Just now"),">"))))},q=function(){var e=Object(E.a)(f.a.mark((function e(t,a,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=11;break}return e.prev=1,e.next=4,x({service:"catalog",endpoint:"getProducts",method:"GET",body:null});case 4:r=e.sent,t(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(n.useState)(0),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)({}),s=Object(u.a)(o,2),l=s[0],p=s[1],f=Object(n.useState)(0),E=Object(u.a)(f,2),b=E[0],h=E[1],v=Object(n.useState)([]),w=Object(u.a)(v,2),g=w[0],y=w[1],O=Object(n.useState)(void 0),j=Object(u.a)(O,2),k=j[0],N=j[1];Object(n.useEffect)((function(){q(y,k,N).then()}),[]);var x=function(e,t){h(t),c(!0),p(e)};return k?r.a.createElement("div",null,"Error: ",k.message):r.a.createElement(i.a,null,r.a.createElement(C,{data:l,quantity:b,show:a,setShow:c}),r.a.createElement(m.a,null,g.map((function(e){return r.a.createElement(d.a,{xs:4,className:"mb-5",key:e.productID},r.a.createElement(S,{data:e,displayConfirmation:x}))}))))},P=a(183),R=function(e){var t=Object(b.a)({},e),a=t.show,c=t.setShow,o=t.messageType,s=Object(n.useState)("MODAL"),i=Object(u.a)(s,2),m=i[0],d=i[1];Object(n.useEffect)((function(){d("MODAL")}),[]);var p=function(){switch(o){case"LOGIN":return{header:"You forgot to login first",body:"To ensure we can keep you up-to-date with your order as it processes we require\nyou to login/register. This will only take a few moments of your time but\nwill help eliminate any issues in keeping you up-to-date with your order."};default:return{header:"Internal error",body:"No information to show for messageType: "+o}}};return r.a.createElement(r.a.Fragment,null,function(){switch(m){case"LOGIN":return r.a.createElement(l.a,{to:{pathname:"/login",state:{returnPath:"/cart"}}});case"REGISTER":return r.a.createElement(l.a,{to:{pathname:"/register",state:{returnPath:"/cart"}}});default:return null}}(),r.a.createElement(P.a,{show:a,size:"lg",onHide:function(){return c(!1)},dialogClassName:"modal-90w","aria-labelledby":"login-warning-message"},r.a.createElement(P.a.Header,{closeButton:!0},r.a.createElement(P.a.Title,{id:"login-warning-message"},p().header)),r.a.createElement(P.a.Body,null,r.a.createElement("p",null,p().body),r.a.createElement(g.a,{className:"modal-button-primary",variant:"primary",onClick:function(e){return d("LOGIN")}},"Login"),r.a.createElement(g.a,{className:"modal-button-primary",variant:"primary",onClick:function(e){return d("REGISTER")}},"Register"),r.a.createElement(g.a,{className:"modal-button-secondary",variant:"secondary",onClick:function(){return c(!1)}},"Close"))))},L=a(181),G=function(){var e=Object(E.a)(f.a.mark((function e(t,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x({service:"cart",endpoint:"cart/".concat(t,"/items/").concat(a),method:"DELETE",body:null}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),F=Object(O.b)((function(e){return{customerID:e.customer.customerID}}))((function(e){var t=function(){var t=Object(E.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.customerID){t.next=5;break}return t.next=3,a(e.item.productID);case 3:t.next=7;break;case 5:return t.next=7,n(e.item.productID,e.customerID);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=function(){var t=Object(E.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.dispatch(j(a));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n=function(){var e=Object(E.a)(f.a.mark((function e(t,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(n,t);case 2:return r=e.sent,e.next=5,a(parseInt(r.productID));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("tr",null,r.a.createElement("td",{className:"table-item"},e.index+1),r.a.createElement("td",{width:"80px"},r.a.createElement(L.a,{width:"200px",height:"150px",src:e.item.image})),r.a.createElement("td",{className:"table-item"},e.item.name),r.a.createElement("td",{className:"table-item"},"\u20ac",e.item.price),r.a.createElement("td",{className:"table-item"},e.item.quantity),r.a.createElement("td",{className:"table-item"},"\u20ac",(e.item.price*e.item.quantity).toFixed(2)),r.a.createElement("td",{width:"30px",className:"table-item"},r.a.createElement(g.a,{onClick:function(){var e=Object(E.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),variant:"danger"},"Remove")))})),A=a(182),B=function(e){var t=e.items;return r.a.createElement(A.a,{striped:!0,bordered:!0,hover:!0,size:"sm",variant:"dark"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"table-header"},"#"),r.a.createElement("th",{className:"table-header"},"Product"),r.a.createElement("th",{className:"table-header"},"Product Name"),r.a.createElement("th",{className:"table-header"},"Unit Price"),r.a.createElement("th",{className:"table-header"},"Quantity"),r.a.createElement("th",{className:"table-header"},"Total"),r.a.createElement("th",null))),r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement(F,{key:t,item:e,index:t})}))))},M=a(74),V=function(){var e=Object(E.a)(f.a.mark((function e(t,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x({service:"order",endpoint:"newOrder",method:"POST",body:{customerID:t,saledate:(new Date).getTime(),orderDetails:Object(M.a)(a)}});case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),_=function(){var e=Object(E.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x({service:"cart",endpoint:"cart/".concat(t,"/items"),method:"DELETE",body:null});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),z=function(e){var t=e.show,a=e.setShow,n=e.message;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{"aria-live":"polite","aria-atomic":"true",className:"toast-wrapper"},r.a.createElement(D.a,{show:t>0,onClose:function(){return a(!1)},delay:3e3,autohide:!0},r.a.createElement(D.a.Header,null,r.a.createElement("strong",{className:"mr-auto"},n),r.a.createElement("small",null,"Just now"),">"))))},H=Object(O.b)((function(e){return{customer:e.customer,cart:e.cart}}))((function(e){var t=Object(b.a)({},e).customer,a=Object(n.useState)(!1),c=Object(u.a)(a,2),o=c[0],s=c[1],l=Object(n.useState)(void 0),m=Object(u.a)(l,2),p=m[0],f=m[1],E=Object(n.useState)(e.cart.items),h=Object(u.a)(E,2),v=h[0],w=h[1],y=Object(n.useState)(!1),O=Object(u.a)(y,2),j=O[0],k=O[1],N=Object(n.useState)(!1),x=Object(u.a)(N,2),I=x[0],S=x[1],D=Object(n.useState)("LOGIN"),C=Object(u.a)(D,2),q=C[0],T=C[1];Object(n.useEffect)((function(){w(e.cart.items)}),[e.cart.items]),Object(n.useEffect)((function(){v.length>0?k(!1):k(!0)}),[v]);Object(n.useEffect)((function(){p&&s(!0)}),[p]),Object(n.useEffect)((function(){o||f(void 0)}),[o]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{show:I,setShow:S,messageType:q}),o&&r.a.createElement(z,{show:o,setShow:s,message:p}),r.a.createElement(i.a,{fluid:!0},r.a.createElement(d.a,{xs:{span:10,offset:1}},r.a.createElement("div",{className:"d-flex justify-content-around"},r.a.createElement(g.a,{className:"cart-button ".concat("mx-5 p-2"),variant:"success",onClick:function(a){e.customer.token?V(t.customerID,v)&&(_(t.customerID),e.dispatch({type:"REMOVE_ALL"}),f("Your order has been placed")):(T("LOGIN"),S(!0))},disabled:j},r.a.createElement("p",{className:"button-text"},"Place Order")),r.a.createElement(g.a,{className:"cart-button ".concat("mx-5 p-2"),variant:"danger",onClick:function(){e.customer.token&&_(t.customerID),e.dispatch({type:"REMOVE_ALL"}),f("Your basket has been emptied")},disabled:j},r.a.createElement("p",{className:"button-text"},"Empty Cart"))),r.a.createElement(B,{items:v}))))})),U=function(e){var t=e.label,a=e.name,n=e.formik,c=e.type,o=void 0===c?"text":c,s=Object(b.a)({},n.getFieldProps(a)),l=s.onChange,u=s.onBlur,i=s.value,m=n.touched["".concat(a)],d=n.errors["".concat(a)];return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a.Label,null,t),r.a.createElement(w.a.Control,{type:o,name:a,value:i,onChange:l,onBlur:u,isInvalid:m&&d,isValid:m&&!d}),r.a.createElement(w.a.Control.Feedback,null),r.a.createElement(w.a.Control.Feedback,{type:"invalid"},d))},J=a(69),Y=a(12),Q=function(e){return{type:"LOGIN",customer:e.customer,token:e.token}},W=function(){return{type:"LOGOUT"}},X=function(e){return{type:"REGISTER",customer:e.customer,token:e.token}},Z=function(){var e=Object(E.a)(f.a.mark((function e(t,a,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x({service:"customer",endpoint:"login",method:"POST",body:{email:t,password:a}}).then((function(e){if("DOES_NOT_EXIST"!==e.error)return e;n(!0)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),$=function(e){console.log(e);var t=Object(b.a)({},e),a=t.dispatch,n=t.setShowToast;return Object(J.a)({initialValues:{email:"mytest@example.com",password:"myPass"},validationSchema:Y.b({email:Y.d().required("No email was provided").email("Invalid email address"),password:Y.d().required("No password was provided")}),onSubmit:function(){var e=Object(E.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.prev=1,e.next=4,Z(t.email,t.password,n);case 4:r=e.sent,e.next=12;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(typeof n),n(!0),console.log(e.t0);case 12:a(Q(r));case 13:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()})},K=function(){var e=Object(E.a)(f.a.mark((function e(t,a,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x({service:"cart",endpoint:"bulkAdd",method:"POST",body:{customerID:n,items:Object(b.a)({},a)}}).then((function(e){t(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ee=function(e){var t=e.show,a=e.setShow,n=e.message;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{"aria-live":"polite","aria-atomic":"true",className:"toast-wrapper"},r.a.createElement(D.a,{show:t>0,onClose:function(){return a(!1)},delay:3e3,autohide:!0},r.a.createElement(D.a.Header,null,r.a.createElement("strong",{className:"mr-auto"},n),r.a.createElement("small",null,"Just now"),">"))))},te=Object(O.b)((function(e){return{customer:e.customer,cart:e.cart}}))((function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),c=a[0],o=a[1],s=e.location.state?e.location.state.returnPath:"/",i=$({dispatch:e.dispatch,setShowToast:o});Object(n.useEffect)((function(){if(e.customer.token){var t=e.cart.items.map((function(t){return Object(b.a)({},t,{customerID:e.customer.customerID})}));K(m,t,e.customer.customerID)}}),[e.customer]);var m=function(t){e.dispatch({type:"SYNC",items:t})};return e.customer.token?r.a.createElement(l.a,{to:s}):r.a.createElement(r.a.Fragment,null,r.a.createElement(ee,{show:c,setShow:o,message:"Incorrect account details"}),r.a.createElement(w.a,{noValidate:!0,onSubmit:i.handleSubmit},r.a.createElement(w.a.Row,null,r.a.createElement(w.a.Group,{as:d.a,md:{span:6,offset:4}},r.a.createElement("h4",{className:"login-msg"},"Welcome back"))),r.a.createElement(w.a.Row,null,r.a.createElement(w.a.Group,{as:d.a,md:{span:3,offset:4},controlId:"email"},r.a.createElement(U,{name:"email",label:"Email",formik:i,type:"email"}))),r.a.createElement(w.a.Row,null,r.a.createElement(w.a.Group,{as:d.a,md:{span:3,offset:4},controlId:"password"},r.a.createElement(U,{name:"password",label:"Password",formik:i,type:"password"}))),r.a.createElement(w.a.Row,null,r.a.createElement(w.a.Group,{as:d.a,md:{span:3,offset:4},controlId:"submitRow2"},r.a.createElement(g.a,{className:"login-button",type:"submit"},"Login")))))})),ae=function(){var e=Object(E.a)(f.a.mark((function e(t,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x({service:"customer",endpoint:"register",method:"POST",body:t}).then((function(e){if("EMAIL_IN_USE"!==e.error)return e;a(!0)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ne=function(e,t){return Object(J.a)({initialValues:{firstName:"Fake",lastName:"Account",email:"test2@example.com",phone:"0871234567",password:"12345678",verifyPassword:"12345678",address1:"Apartment A",address2:"False Rd.",city:"Cork City",state:"Cork",country:"Ireland",eircode:"A00B012",isAdmin:!1},validationSchema:Y.b({firstName:Y.d().max(15,"Must be 15 characters or less").required("First name required"),lastName:Y.d().max(20,"Must be 20 characters or less").required("Last name required"),email:Y.d().email("Invalid email address").required("No email was provided"),phone:Y.d().matches("\\+?[0-9 ]+","Can only contain numbers").trim("Remove leading/trailing whitespace").required("No phone number was provided"),password:Y.d().min(8,"Passwords must be over 8 characters long").required("No password was provided"),verifyPassword:Y.d().oneOf([Y.c("password")],"Passwords are not the same").required("No password was provided"),address1:Y.d().required("Street name is required"),address2:Y.d(),city:Y.d().required("City name is required"),state:Y.d().required("State is required"),country:Y.d().required("Country is required"),eircode:Y.d().required("Zip is required")}),onSubmit:function(){var a=Object(E.a)(f.a.mark((function a(n){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(n),a.prev=1,a.t0=e,a.t1=X,a.next=6,ae(n,t);case 6:return a.t2=a.sent,a.t3=(0,a.t1)(a.t2),a.next=10,(0,a.t0)(a.t3);case 10:a.next=15;break;case 12:a.prev=12,a.t4=a.catch(1),console.log(a.t4);case 15:case"end":return a.stop()}}),a,null,[[1,12]])})));return function(e){return a.apply(this,arguments)}}()})},re=function(e){var t=e.label,a=e.name,n=e.formik,c=e.type,o=void 0===c?"checkbox":c,s=Object(b.a)({},n.getFieldProps(a)),l=s.onChange,u=s.onBlur,p=s.value,f=n.touched["".concat(a)],E=n.errors["".concat(a)];return r.a.createElement(i.a,null,r.a.createElement(m.a,null,r.a.createElement(d.a,{md:{span:10,offset:0}},r.a.createElement(w.a.Check,{type:o,label:t,name:a,value:p,onChange:l,onBlur:u,isInvalid:f&&E,isValid:f&&!E}))))},ce=Object(O.b)((function(e){return{customer:e.customer}}))((function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),c=a[0],o=a[1],s=e.location.state?e.location.state.returnPath:"/",i=ne(e.dispatch,o);return e.customer.token?r.a.createElement(l.a,{to:s}):r.a.createElement(r.a.Fragment,null,r.a.createElement(ee,{show:c,setShow:o,message:"That email is already in use."}),r.a.createElement(w.a,{noValidate:!0,onSubmit:i.handleSubmit},r.a.createElement(w.a.Row,null,r.a.createElement(w.a.Group,{as:d.a,md:{span:5,offset:4}},r.a.createElement("h4",{className:"welcome-msg"},"Welcome to CIT Auto Buyers."))),r.a.createElement(w.a.Row,null,r.a.createElement(w.a.Group,{as:d.a,md:{span:6,offset:4}},r.a.createElement("h5",{className:"welcome-msg__details"},"To create your new account we will just need a few details."))),r.a.createElement(w.a.Row,null,r.a.createElement(w.a.Group,{as:d.a,md:{span:3,offset:3},controlId:"firstName"},r.a.createElement(U,{name:"firstName",label:"First Name",formik:i})),r.a.createElement(w.a.Group,{as:d.a,md:3,controlId:"lastName"},r.a.createElement(U,{name:"lastName",label:"Last Name",formik:i}))),r.a.createElement(w.a.Row,null,r.a.createElement(w.a.Group,{as:d.a,md:{span:3,offset:3},controlId:"email"},r.a.createElement(U,{name:"email",label:"Email",formik:i,type:"email"})),r.a.createElement(w.a.Group,{as:d.a,md:3,controlId:"phone"},r.a.createElement(U,{name:"phone",label:"Phone Number",formik:i,type:"phone"}))),r.a.createElement(w.a.Row,null,r.a.createElement(w.a.Group,{as:d.a,md:{span:3,offset:3},controlId:"password"},r.a.createElement(U,{name:"password",label:"Password",formik:i,type:"password"})),r.a.createElement(w.a.Group,{as:d.a,md:3,controlId:"verifyPassword"},r.a.createElement(U,{name:"verifyPassword",label:"Verify Password",formik:i,type:"password"}))),r.a.createElement(w.a.Row,null,r.a.createElement(w.a.Group,{as:d.a,md:{span:3,offset:3},controlId:"address1"},r.a.createElement(U,{name:"address1",label:"Street Name",formik:i})),r.a.createElement(w.a.Group,{as:d.a,md:3,controlId:"address2"},r.a.createElement(U,{name:"address2",label:"Address Line 2",formik:i}))),r.a.createElement(w.a.Row,null,r.a.createElement(w.a.Group,{as:d.a,md:{span:3,offset:3},controlId:"city"},r.a.createElement(U,{name:"city",label:"City",formik:i})),r.a.createElement(w.a.Group,{as:d.a,md:3,controlId:"state"},r.a.createElement(U,{name:"state",label:"County",formik:i}))),r.a.createElement(w.a.Row,null,r.a.createElement(w.a.Group,{as:d.a,md:{span:3,offset:3},controlId:"country"},r.a.createElement(U,{name:"country",label:"Country",formik:i})),r.a.createElement(w.a.Group,{as:d.a,md:3,controlId:"eircode"},r.a.createElement(U,{name:"eircode",label:"Eircode",formik:i}))),r.a.createElement(w.a.Row,null,r.a.createElement(w.a.Group,{as:d.a,md:{span:3,offset:3},controlId:"isAdmin"},r.a.createElement(re,{name:"isAdmin",label:"Is this an admin account?",formik:i})),r.a.createElement(w.a.Group,{as:d.a,md:{span:6,offset:3},controlId:"submit"},r.a.createElement(g.a,{className:"create-account-button",type:"submit"},"Create account")))))})),oe=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"404 - Page not found"))},se=a(187),le=a(186),ue=Object(O.b)((function(e){return{cart:e.cart}}))((function(e){var t=Object(n.useState)(e.cart.items),a=Object(u.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)(0),l=Object(u.a)(s,2),i=l[0],p=l[1],f=Object(n.useState)(0),E=Object(u.a)(f,2),b=E[0],h=E[1];return Object(n.useEffect)((function(){o(e.cart.items)}),[e.cart]),Object(n.useEffect)((function(){var e=0,t=0;c.forEach((function(a){e+=a.quantity,t+=a.quantity*a.price})),p(e),h(t.toFixed(2))}),[c]),r.a.createElement(m.a,null,r.a.createElement(d.a,{xs:1},r.a.createElement("img",{src:"/images/shopping_cart.png",width:"40",height:"40",className:"d-inline-block align-top",alt:"React Bootstrap logo"})),r.a.createElement(d.a,{xs:4},r.a.createElement(v.a,{pill:!0,variant:"warning"},i)),r.a.createElement(d.a,{xs:2},r.a.createElement("h5",{className:"header-pricing"},"\u20ac",b)))})),ie=function(){return r.a.createElement(le.a,null,r.a.createElement(se.a.Brand,{as:s.b,to:"/cart"},r.a.createElement(ue,null)),r.a.createElement(le.a.Link,{as:s.c,to:"/login",activeClassName:"active"},"Login"),r.a.createElement(le.a.Link,{as:s.c,to:"/register",activeClassName:"active"},"Register"))},me=function(){return r.a.createElement(le.a,null,r.a.createElement(se.a.Brand,{as:s.b,to:"/cart"},r.a.createElement(ue,null)),r.a.createElement(le.a.Link,{as:s.c,to:"/orders",activeClassName:"active"},"My Orders"),r.a.createElement(le.a.Link,{as:s.c,to:"/logout",activeClassName:"active"},"Logout"))},de=function(){return r.a.createElement(le.a,null,r.a.createElement(le.a.Link,{as:s.c,to:"/newProduct",activeClassName:"active"},"Register Product"),r.a.createElement(le.a.Link,{as:s.c,to:"/logout",activeClassName:"active"},"Logout"))},pe=Object(O.b)((function(e){return{firstName:e.customer.firstName,lastName:e.customer.lastName,token:e.customer.token,isAdmin:e.customer.isAdmin}}))((function(e){var t=Object(n.useState)(r.a.createElement(ie,null)),a=Object(u.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)("".concat(e.firstName," ").concat(e.lastName)),i=Object(u.a)(l,2),m=i[0],d=i[1];return Object(n.useEffect)((function(){e.token?o(!0===e.isAdmin?r.a.createElement(de,null):r.a.createElement(me,null)):o(r.a.createElement(ie,null))}),[e.token,e.isAdmin]),Object(n.useEffect)((function(){e.firstName?d("".concat(e.firstName," ").concat(e.lastName)):d(null)}),[e.firstName,e.lastName]),r.a.createElement(r.a.Fragment,null,r.a.createElement(se.a,{fixed:"top",expand:"lg",bg:"dark",variant:"dark"},r.a.createElement(se.a.Brand,{as:s.c,to:"/products"},"CIT Auto Buyers"),r.a.createElement(se.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(se.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(le.a,{className:"mr-auto"},r.a.createElement(le.a.Link,{as:s.c,to:"/products",activeClassName:"active"},"Products")),r.a.createElement(le.a,{className:"mr-auto"},m?r.a.createElement(le.a.Link,{as:s.c,to:"/orders",activeClassName:"active"},"Logged in as ",m):null),c)))})),fe=function(){return r.a.createElement("div",{className:"header"},r.a.createElement(pe,{className:"navbar"}))},Ee=function(){var e=Object(E.a)(f.a.mark((function e(t){var a,n,r,c,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(b.a)({},t),n=a.name,r=a.price,c=a.quantity,o=a.image,e.next=3,x({service:"catalog",endpoint:"newProduct",method:"POST",body:{name:n,price:r,quantity:c,image:o}});case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){return Object(J.a)({initialValues:{name:"",price:"",quantity:"",image:"/images/"},validationSchema:Y.b({name:Y.d().required("No product name was provided"),price:Y.a().required("No price was provided").min(.01),quantity:Y.a().required("No quantity was provided").min(1,"Value must be 1 or greater to be valid").integer("Input must be a whole number"),image:Y.d().required("Image path is required").min("/images/".length).matches(/.*\.(png|jpeg|jpg)$/,{message:"Selected image must have a .png/.jpeg/.jpg file extension"})}),onSubmit:function(e){Ee(e)}})},he=function(){var e=be();return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{noValidate:!0,onSubmit:e.handleSubmit},r.a.createElement(w.a.Row,null,r.a.createElement(w.a.Group,{as:d.a,md:{span:5,offset:4}},r.a.createElement("h4",null,"Add a new product to the store inventory."))),r.a.createElement(w.a.Row,null,r.a.createElement(w.a.Group,{as:d.a,md:{span:6,offset:3},controlId:"name"},r.a.createElement(U,{name:"name",label:"Product Name",formik:e}))),r.a.createElement(w.a.Row,null,r.a.createElement(w.a.Group,{as:d.a,md:{span:3,offset:3},controlId:"price"},r.a.createElement(U,{name:"price",label:"Unit Price",formik:e})),r.a.createElement(w.a.Group,{as:d.a,md:{span:3,offset:0},controlId:"quantity"},r.a.createElement(U,{name:"quantity",label:"Quantity In-Stock",formik:e}))),r.a.createElement(w.a.Row,null,r.a.createElement(w.a.Group,{as:d.a,md:{span:6,offset:3},controlId:"image"},r.a.createElement(U,{name:"image",label:"Product Image",formik:e}))),r.a.createElement(w.a.Row,null,r.a.createElement(w.a.Group,{as:d.a,md:{span:3,offset:8},controlId:"submitRow3"},r.a.createElement(g.a,{type:"submit"},"Add Product")))))},ve=a(131),we=a(132),ge=a(139),ye=a(133),Oe=a(140),je=function(){var e=Object(E.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x({service:"customer",endpoint:"logout",method:"POST",headers:{Authorization:"Bearer ".concat(t)}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(e){function t(){var e,a;Object(ve.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(ge.a)(this,(e=Object(ye.a)(t)).call.apply(e,[this].concat(c)))).state={token:a.props.token,dispatch:a.props.dispatch,content:r.a.createElement(r.a.Fragment,null)},a}return Object(Oe.a)(t,e),Object(we.a)(t,[{key:"componentDidMount",value:function(){var e=Object(E.a)(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.token){e.next=15;break}return e.prev=1,this.state.dispatch({type:"REMOVE_ALL"}),e.t0=this.state,e.t1=W,e.next=7,je(this.state.token).then((function(){t.state.content=r.a.createElement(l.a,{to:"/login"})}));case 7:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.t0.dispatch.call(e.t0,e.t3),e.next=15;break;case 12:e.prev=12,e.t4=e.catch(1),console.log("error",e.t4);case 15:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.content}}]),t}(r.a.Component),Ne=Object(O.b)((function(e){return{token:e.customer.token,cart:e.cart}}))(ke),xe=function(){var e=Object(E.a)(f.a.mark((function e(t,a,n,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=12;break}return console.log(a),e.prev=2,e.next=5,x({service:"order",endpoint:"getOrders/".concat(a),method:"GET",body:null}).then((function(e){console.log("orders",e),t(e)}));case 5:e.sent,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0),r(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),Ie=a(115),Se=Object(O.b)((function(e){return{customerID:e.customer.customerID}}))((function(e){var t=Object(b.a)({},e),a=t.setShow,c=t.customerID,o=t.setModalData,s=Object(n.useState)({}),l=Object(u.a)(s,2),i=l[0],m=l[1],d=Object(n.useState)({}),p=Object(u.a)(d,2),f=p[0],E=p[1],h=Object(n.useState)(void 0),v=Object(u.a)(h,2),w=v[0],g=v[1];Object(n.useEffect)((function(){xe(m,c,w,g)}),[]);var y=[{label:"Order No.",field:"orderNo",sort:"asc",width:100},{label:"Sale Date",field:"saleDate",sort:"asc",width:220},{label:"Order Size",field:"orderSize",sort:"asc",width:220},{label:"Order Total",field:"orderTotal",sort:"asc"},{label:"",field:"button",sort:"asc",width:135,align:"center"}],O=function(e){var t=new Date(0);t.setTime(e);var a="".concat(t.getDate()).padStart(2,0),n="".concat(t.getMonth()+1).padStart(2,0),r=t.getFullYear();return"".concat(r,"/").concat(n,"/").concat(a)};Object(n.useEffect)((function(){if(console.log("ORDERS",i),Object.keys(i).length>0){var e=i.map((function(e){return function(e){var t=0,n=0;return e.orderDetails.forEach((function(e){n+=e.quantity,t+=e.quantity*e.price})),t=t.toFixed(2),e.saledate=O(e.saledate),{orderNo:"".concat(e.orderID),saleDate:e.saledate,orderSize:"".concat(n),orderTotal:"".concat(t),button:r.a.createElement(Ie.b,{color:"light-blue",size:"sm",onClick:function(r){e=Object(b.a)({},e,{orderSize:n,orderTotal:t}),o(e),a(!0)}},"Order Info")}}(e)}));E({columns:y,rows:e})}}),[i]);try{return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ie.c,{striped:!0,bordered:!0,small:!0,order:["saleDate","desc"],data:f}))}catch(j){console.log(j)}})),De=function(e){var t=e.modalData.orderDetails;return r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement("tr",{key:e},r.a.createElement("td",null,e.productID),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.quantity),r.a.createElement("td",null,"\u20ac",e.price),r.a.createElement("td",null,"\u20ac",(e.price*e.quantity).toFixed(2)))})))},Ce=function(e){var t=Object(b.a)({},e),a=t.show,n=t.setShow,c=t.modalData;console.log("MODAL",c);return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{show:a,size:"lg",onHide:function(){return n(!1)},dialogClassName:"modal-90w","aria-labelledby":"login-warning-message"},r.a.createElement(P.a.Header,{closeButton:!0},r.a.createElement(P.a.Title,{id:"login-warning-message"},"Order No. ",c.orderID)),r.a.createElement(P.a.Body,null,r.a.createElement("h4",null,"Sale date: ",c.saledate),r.a.createElement(A.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ProductID"),r.a.createElement("th",null,"Product Name"),r.a.createElement("th",null,"Quantity"),r.a.createElement("th",null,"Unit Price"),r.a.createElement("th",null,"Total Price"))),r.a.createElement("tbody",null,r.a.createElement(De,{modalData:c}))),r.a.createElement("h4",null,"Total: \u20ac",c.orderTotal),r.a.createElement(g.a,{className:"modal-button-secondary",variant:"primary",onClick:function(){return n(!1)}},"Close"))))},qe=(a(168),a(169),function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)({}),s=Object(u.a)(o,2),l=s[0],m=s[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce,{show:a,setShow:c,modalData:l}),r.a.createElement(i.a,{fluid:!0},r.a.createElement(d.a,{xs:{span:6,offset:3}},r.a.createElement("h1",null,"Orders"),r.a.createElement(Se,{setShow:c,setModalData:m}))))}),Te=function(){return r.a.createElement(s.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(fe,null),r.a.createElement(l.d,null,r.a.createElement(l.b,{path:["/","/products"],component:T,exact:!0}),r.a.createElement(l.b,{path:"/cart",component:H}),r.a.createElement(l.b,{path:"/login",component:te}),r.a.createElement(l.b,{path:"/register",component:ce}),r.a.createElement(l.b,{path:"/newProduct",component:he}),r.a.createElement(l.b,{path:"/orders",component:qe}),r.a.createElement(l.b,{path:"/logout",component:Ne}),r.a.createElement(l.b,{component:oe}))))},Pe=(a(170),a(138)),Re=a(38),Le=a(104),Ge=a(114),Fe=a.n(Ge),Ae={customerID:null,token:void 0},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(b.a)({},e,{},t.customer,{token:t.token});case"LOGOUT":return Object(b.a)({},Ae);case"REGISTER":return Object(b.a)({},e,{},t.customer,{token:t.token});default:return e}},Me={items:[]},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD":var a=e.items.some((function(e){return e.productID===t.item.productID}));return a?{items:Object(M.a)(e.items.map((function(e){return e.productID===t.item.productID?(e.quantity+=t.item.quantity,e):e})))}:{items:[].concat(Object(M.a)(e.items),[t.item])};case"SYNC":return{items:t.items};case"REMOVE":return{items:Object(M.a)(e.items.filter((function(e){if(e.productID!==t.productID)return e})))};case"REMOVE_ALL":return{items:[]};default:return e}},_e={key:"customer",storage:Fe.a},ze={key:"cart",storage:Fe.a},He=Object(Le.a)(_e,Be),Ue=Object(Le.a)(ze,Ve),Je=function(){var e=Object(Re.c)(Object(Re.b)({customer:He,cart:Ue}));return{store:e,persistor:Object(Le.b)(e)}}(),Ye=Je.store,Qe=Je.persistor;console.log(Ye.getState());var We=r.a.createElement(O.a,{store:Ye},r.a.createElement(Pe.a,{loading:null,persistor:Qe},r.a.createElement(Te,null)));o.a.render(We,document.getElementById("root"))},33:function(e,t,a){}},[[141,1,2]]]);
//# sourceMappingURL=main.15b03725.chunk.js.map